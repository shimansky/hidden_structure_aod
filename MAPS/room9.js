left = 150;
bottom = 100;

var map =[ ["wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall",],["wp wall","lw wall","ww wall","lw wall","lw wall","lw wall","lw wall","lw wall","ww wall","lw wall","lw wall","lw wall","wp wall","we wall","wp wall","lw wall","lw wall","ww wall","ww wall","lw wall","lw wall","nw wall","lw wall","lw wall","lw wall","ww wall","lw wall","lw wall","lw wall","wp wall",],["wp wall","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","wp wall","we wall","wp wall","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","wp wall",],["wp wall","oa","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","oa","wp wall","wp wall","wp wall","oa","wp wall","wp wall","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","lw wall","wallserv wall","ww wall","wp wall","wallserv wall","nw wall","ws wall","wallserv wall","rdo","wallserv wall","locked_door_white wall","ww wall","wallserv wall","wp wall","we wall","wp wall","ww wall","exit_door","ww wall","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","gr","fserv","gr","wp wall","fserv","gr","gr","fserv","gr","fserv","gr","gr","fserv","wp wall","we wall","wp wall","oash","oash","oash","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","fd3","pistolCells","pistol","wp wall","fd3","fwentbr","flf","o","o","o","flf","trap1","flf","wp wall","we wall","wp wall","wp wall","oa","wp wall","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","flf","shootgunCells","shootGun","lw wall","flf","oa","oa","o","bg","o","oa","oa","flf","wp wall","we wall","wp wall","lw wall","locked_door_black wall","lw wall","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","fireGun","firegunCells","flf","gr","flf","fwent","flf","o","o","o","medicKit","fwent","key_card_white","wp wall","we wall","wp wall","ow","vw","ow","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","b","plasmagunCells","plasmaGun","wp wall","wrd","b","wrd","fd3","flf","fd5","wrd","b","wrd","wp wall","we wall","wp wall","oa","ow","oa","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","we wall","lw wall","lw wall","lw wall","lw wall","lw wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall",],["wp wall","oa","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","oa","wp wall",],["wp wall","oa","lw wall","ww wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","ww wall","lw wall","wp wall","we wall","wp wall","nw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","nw wall","lw wall","lw wall","oa","wp wall",],["wp wall","oa","oash","oash","oash","oash","oash","oash","oash","oash","oash","oa","wp wall","we wall","wp wall","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oash","oa","wp wall",],["wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall",],["lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall",],["we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall","wp wall","oa","wp wall","we wall","wp wall","oa","wp wall","wp wall","lw wall","ww wall","nw wall","wp wall","wp wall","we wall","we wall","we wall","we wall","we wall","we wall","we wall",],["wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","we wall","we wall","wp wall","wp wall","oa","wp wall","wp wall","wp wall","oa","wp wall","wp wall","key_card_black","oash","oash","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall",],["wp wall","lw wall","lw wall","lw wall","ww wall","lw wall","wp wall","we wall","we wall","wp wall","ww wall","ws wall","ww wall","wp wall","ww wall","ws wall","ww wall","wp wall","oa","oa","oa","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","ww wall","lw wall","wp wall",],["wp wall","oash","oash","oash","oash","oash","wp wall","wp wall","wp wall","wp wall","oash","oash","oash","wp wall","oash","oash","oash","wp wall","wp wall","wp wall","oa","oash","oash","oash","oash","oash","oash","ow","oash","wp wall",],["wp wall","oa","o","ow","o","oa","lw wall","lw wall","lw wall","lw wall","fwent","fwentbr","fwent","wp wall","trap1","fwent","fwent","lw wall","lw wall","ww wall","oa","oa","o","o","o","o","ow","portal","ow","wp wall",],["wp wall","oa","oa","oa","oa","oa","oash","oash","oash","oash","oa","oa","oa","wp wall","oa","oa","oa","oash","oash","oash","oa","oa","oa","oa","oa","oa","oa","ow","oa","wp wall",],["wp wall","wp wall","wp wall","ud","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall","wp wall",],["lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall","lw wall",] ];
     teleportX = -250;
     teleportY = 650;
       
maxGhostIsCreated = 7;
setTimeout(createNewGhost, 2500);

var rotorsSound = new Audio('SOUND/rotors.mp3');
var rotorSwitch = new Audio('SOUND/rotorSwitch.mp3');

let rotorIsRun = 'rotor.gif';
let rotorIsStop = 'rotorStop.png';
let flagTrigger = 0;


var rotorDamage = 200;
var startTrigger1Interval;
var stopTrigger1Interval;
var startTrigger3Interval;
var stopTrigger3Interval;
var rotor123Swap;
var rotor456Swap;

var damageFromRotors;

var startTrigger1Interval;
var startTrigger3Interval;

setTimeout(()=>{
     createSomeThing("rotorTrigger", "trigger", 500, 500, "rotorTrigger");
     createSomeThing("rotorTrigger2", "trigger", 100, 500, "rotorTrigger2");
     createSomeThing("rotorTrigger3", "trigger", 1150, 500, "rotorTrigger3");
     createSomeThing("rotorTrigger4", "trigger", 800, 500, "rotorTrigger4");
     createSomeThing("rotor1", "rotor", 150, 500, "rotor1");
     createSomeThing("rotor2", "rotor", 250, 500, "rotor2");
     createSomeThing("rotor3", "rotor", 350, 500, "rotor3");
     createSomeThing("rotor4", "rotor", 850, 500, "rotor4");
     createSomeThing("rotor5", "rotor", 950, 500, "rotor5");
     createSomeThing("rotor6", "rotor", 1050, 500, "rotor6");
},3000);

setTimeout(()=>{
     damageFromRotors = setInterval(()=>{
          if(flagTrigger == 1){
               let p = figure.getBoundingClientRect();
               let rr1 = rotor1.getBoundingClientRect();
               let rr2 = rotor2.getBoundingClientRect();
               let rr3 = rotor3.getBoundingClientRect();
               let rr4 = rotor4.getBoundingClientRect();
               let rr5 = rotor5.getBoundingClientRect();
               let rr6 = rotor6.getBoundingClientRect();
               if (( (p.bottom-rr1.bottom)<=25 && (p.bottom-rr1.bottom)>=-25 ) && (  (p.right-rr1.right)<=25 && (p.right-rr1.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
               if (( (p.bottom-rr2.bottom)<=25 && (p.bottom-rr2.bottom)>=-25 ) && (  (p.right-rr2.right)<=25 && (p.right-rr2.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
               if (( (p.bottom-rr3.bottom)<=25 && (p.bottom-rr3.bottom)>=-25 ) && (  (p.right-rr3.right)<=25 && (p.right-rr3.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
               if (( (p.bottom-rr4.bottom)<=25 && (p.bottom-rr4.bottom)>=-25 ) && (  (p.right-rr4.right)<=25 && (p.right-rr4.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
               if (( (p.bottom-rr5.bottom)<=25 && (p.bottom-rr5.bottom)>=-25 ) && (  (p.right-rr5.right)<=25 && (p.right-rr5.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
               if (( (p.bottom-rr6.bottom)<=25 && (p.bottom-rr6.bottom)>=-25 ) && (  (p.right-rr6.right)<=25 && (p.right-rr6.right)>=-25) ){
                    life-=rotorDamage;
                    panel.innerHTML="<div class='healthIcon'></div> " + life;
                    window.navigator.vibrate([100]);
                    if(life<0){
                      var flagGamePause = 0;
                      panel.innerHTML="<div class='healthIcon'></div> " + life;
                      showMassege();
                      window.navigator.vibrate([100,100,30,100,100,30,100,100,30]);
                      setTimeout(exit, 5000);
                    }
               }
          }
     },100);

startTrigger1Interval = setInterval(startTrigger1,50);
startTrigger3Interval = setInterval(startTrigger3,50);
}, 4000);


function startRotor(thing){
     thing.style.backgroundImage = 'url(IMG/' + rotorIsRun + ')';
}

function stopRotor(thing){
     thing.style.backgroundImage = 'url(IMG/' + rotorIsStop + ')';

}

function startTrigger1(){

          let p = figure.getBoundingClientRect();
          let trg = document.getElementById("rotorTrigger").getBoundingClientRect();
          if (( (p.bottom-trg.bottom)<=25 && (p.bottom-trg.bottom)>=-25 ) && (  (p.right-trg.right)<=25 && (p.right-trg.right)>=0) ){  
               if(flagTrigger == 0){         
                    // windByRigth = setInterval(playerMoveRightByWind, 100);
                    startRotor(rotor1);
                    startRotor(rotor2);
                    startRotor(rotor3);
                    rotor123Swap = setInterval(Rotors123Interval, 8000);
                    try{
                     rotorsSound.pause();
                     rotorsSound.currentTime = 0;
                   }catch{
                     
                   }
                    rotorsSound.play();
                    rotorSwitch.play();
                    clearInterval(startTrigger1Interval);
                    flagTrigger = 1;
                    stopTrigger1Interval = setInterval(stopTrigger1,50);
          }
     }
}

function stopTrigger1(){
     try{
     
          let p = figure.getBoundingClientRect();
          let trg2 = document.getElementById("rotorTrigger2").getBoundingClientRect();

          if (( (p.bottom-trg2.bottom)<=25 && (p.bottom-trg2.bottom)>=-25 ) && ( (p.right-trg2.right)<=0 && (p.right-trg2.right)>=-50 ) ){
               if(flagTrigger == 1){
                    // clearInterval(windByRigth);
                    try{
                         // clearInterval(windByLeft);
                    }catch{

                    }
                    stopRotor(rotor1);
                    stopRotor(rotor2);
                    stopRotor(rotor3);
                    try{
                     rotorsSound.pause();
                     rotorsSound.currentTime = 0;
                     rotorSwitch.play();
                   }catch{
                     
                   }
                   
                    clearInterval(rotor123Swap);
                    clearInterval(stopTrigger1Interval);
                    flagTrigger= 0;
                    startTrigger1Interval = setInterval(startTrigger1,50);
                    
          }
     }

     }catch{

     }
}

function startTrigger3(){
     try{

          let p = figure.getBoundingClientRect();
          let trg3 = document.getElementById("rotorTrigger3").getBoundingClientRect();
          if (( (p.bottom-trg3.bottom)<=25 && (p.bottom-trg3.bottom)>=-25 ) && (  (p.right-trg3.right)<=25 && (p.right-trg3.right)>=0) ){   
               if(flagTrigger == 0){         
                    // windByLeft = setInterval(playerMoveLeftByWind, 100);
                    startRotor(rotor4);
                    startRotor(rotor5);
                    startRotor(rotor6);
                    rotor456Swap = setInterval(Rotors456Interval, 8000);
                    try{
                     rotorsSound.pause();
                     rotorsSound.currentTime = 0;
                   }catch{
                     
                   }
                    rotorsSound.play();
                    rotorSwitch.play();
                    clearInterval(startTrigger3Interval);
                    flagTrigger = 1;
                    stopTrigger3Interval = setInterval(stopTrigger3,50);
          }
     }
     }catch{
          
     }
}

function stopTrigger3(){
     
          let p = figure.getBoundingClientRect();
          let trg4 = document.getElementById("rotorTrigger4").getBoundingClientRect();

          if (( (p.bottom-trg4.bottom)<=25 && (p.bottom-trg4.bottom)>=-25 ) && ( (p.right-trg4.right)<=0 && (p.right-trg4.right)>=-25 ) ){
               if(flagTrigger == 1){
                    // clearInterval(windByLeft);
                    try{
                         // clearInterval(windByRigth);
                    }catch{

                    }
                    stopRotor(rotor4);
                    stopRotor(rotor5);
                    stopRotor(rotor6);
                    try{
                     rotorsSound.pause();
                     rotorsSound.currentTime = 0;
                     rotorSwitch.play();
                   }catch{
                     
                   }
                   
                    clearInterval(rotor456Swap);
                    clearInterval(stopTrigger3Interval);
                    flagTrigger= 0;
                    startTrigger3Interval = setInterval(startTrigger3,50);
          }
     }
}


function Rotors123Interval(){
     flagTrigger = 0;
     stopRotor(rotor1);
     stopRotor(rotor2);
     stopRotor(rotor3);
     // clearInterval(windByRigth);
         
          try{
               // clearInterval(windByLeft);
          }catch{

          }
     setTimeout(()=>{
          try{
      rotorsSound.pause();
      rotorsSound.currentTime = 0;
    }catch{
      
    }
    
   rotorsSound.play();
          flagTrigger = 1;
     startRotor(rotor1);
     startRotor(rotor2);
     startRotor(rotor3);
     // windByRigth = setInterval(playerMoveRightByWind, 100); 
     }, 2000);

}

function Rotors456Interval(){
     flagTrigger = 0;
     stopRotor(rotor4);
     stopRotor(rotor5);
     stopRotor(rotor6);
     // clearInterval(windByLeft);
          
          try{
               // clearInterval(windByRigth);
          }catch{

          }
     setTimeout(()=>{
          try{
      rotorsSound.pause();
      rotorsSound.currentTime = 0;
    }catch{
      
    }
    
   rotorsSound.play();
          flagTrigger = 1;
     startRotor(rotor4);
     startRotor(rotor5);
     startRotor(rotor6);
     // windByLeft = setInterval(playerMoveLeftByWind, 100);
     }, 2000);

}

setTimeout(addThingsOnPenals, 3000);





